(this["webpackJsonpmuseum-finder"]=this["webpackJsonpmuseum-finder"]||[]).push([[0],{31:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n,r=a(1),s=a.n(r),c=a(26),i=a.n(c),o=(a(31),a(2));function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function l(e,t){var a=e.title,s=e.titleId,c=u(e,["title","titleId"]);return r.createElement("svg",d({enableBackground:"new 0 0 46 42.219",height:16.55,viewBox:"0 0 46 42.219",width:46,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},c),a?r.createElement("title",{id:s},a):null,n||(n=r.createElement("path",{d:"m42.933 1.219c-1.551 1.55-19.933 19.619-19.933 19.619s-18.382-18.069-19.933-19.619c-2.742-2.742-3.067 0-3.067 0v41h23 23v-41c0 0-.325-2.742-3.067 0z",fill:"#b0b0b0"})))}var j=r.forwardRef(l),b=(a.p,a(0)),f=function(){return Object(b.jsx)("header",{children:Object(b.jsxs)("h1",{children:["Museum ",Object(b.jsxs)("span",{children:[Object(b.jsx)(j,{className:"logo"}),"Finder"]})]})})},m=a(4),p=a.n(m),O=a(6),h=a(7),x=a.n(h),v=function(e){var t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],s=a[1],c=function(){var t=Object(O.a)(p.a.mark((function t(a){var r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,x()({url:"https://api.opentripmap.com/0.1/en/places/geoname",method:"GET",responseType:"JSON",params:{name:n,apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 4:r=t.sent,c={name:r.data.name,country:r.data.country,lat:r.data.lat,lon:r.data.lon},e.setCityData(c),s(""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.setHasError(!0);case 14:case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)("main",{children:Object(b.jsxs)("form",{onSubmit:function(e){return c(e)},className:"wrapper",children:[Object(b.jsx)("label",{className:"visuallyHidden",htmlFor:"city",children:"Enter a city"}),Object(b.jsx)("input",{id:"city",value:n,type:"text",placeholder:"Enter City",onChange:function(e){return s(e.target.value)}}),Object(b.jsx)("label",{className:"visuallyHidden",htmlFor:"submit",children:"Search"}),Object(b.jsx)("input",{id:"submit",type:"submit",value:"Search"}),Object(b.jsx)("p",{children:"Enter a city to search for museums."})]})})},y=Object(r.forwardRef)((function(e,t){var a=Object(r.useState)({}),n=Object(o.a)(a,2),s=n[0],c=n[1],i=e.cityData,d=i.name,u=i.country,l=i.lat,j=i.lon;return Object(r.useEffect)((function(){(function(){var e=Object(O.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x()({url:"https://api.openweathermap.org/data/2.5/weather",method:"GET",responseType:"JSON",params:{lat:l,lon:j,units:"metric",appid:"c9a747c48bbadd82284c2f57f9cf4656"}});case 3:t=e.sent,a=Math.round(t.data.main.temp),n={temp:a,description:t.data.weather[0].main},c(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[e.cityData]),Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:"cityInfo",id:"cityInfoContainer",ref:e.forwardedRef,children:[Object(b.jsx)("p",{children:"Museums in"}),Object(b.jsxs)("h2",{children:[d,", ",u]}),Object(b.jsxs)("div",{className:"weather",children:[Object(b.jsxs)("p",{children:[s.temp," \u2103"]}),Object(b.jsx)("p",{children:s.description})]})]})})})),w=a(5),g=function(e){e&&e.scrollIntoView({behavior:"smooth"})},S=function(e){var t=Object(r.useState)([]),a=Object(o.a)(t,2),n=a[0],s=a[1],c=e.cityData,i=c.lon,d=c.lat;Object(r.useEffect)((function(){(function(){var t=Object(O.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x()({url:"https://api.opentripmap.com/0.1/en/places/radius",method:"GET",responseType:"JSON",params:{radius:1e5,lon:i,lat:d,kinds:"museums",rate:"3",format:"json",limit:20,apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 3:a=t.sent,(n=[]).push.apply(n,Object(w.a)(a.data)),s(n),g(e.forwardedRef.current),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.setHasError(!0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}})()()}),[e.cityData]);var u=Object(w.a)(n);return Object(b.jsx)("section",{className:"museumsList wrapper",children:Object(b.jsx)("ul",{children:u.map((function(t){return Object(b.jsxs)("li",{children:[Object(b.jsx)("span",{children:Object(b.jsx)("i",{className:"fas fa-landmark"})}),Object(b.jsx)("button",{type:"button",onClick:function(){return a=t.xid,e.setXid(a),void e.setIsHidden(!1);var a},children:t.name})]},t.xid)}))})})},k=function(e){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(y,{cityData:e.cityData,forwardedRef:e.forwardedRef}),Object(b.jsx)(S,{cityData:e.cityData,setXid:e.setXid,setIsHidden:e.setIsHidden,setHasError:e.setHasError,forwardedRef:e.forwardedRef})]})},E=a(12),N=a.n(E);a(52);N.a.initializeApp({apiKey:"AIzaSyCgo__XjZygSR0XWEphiMiwPuOjNxefH0Y",authDomain:"museumfinder-3d651.firebaseapp.com",databaseURL:"https://museumfinder-3d651.firebaseio.com",projectId:"museumfinder-3d651",storageBucket:"museumfinder-3d651.appspot.com",messagingSenderId:"609226698076",appId:"1:609226698076:web:a6cfa6c2f5a9d2c04ba599"});var I=N.a,R=function(e){var t=Object(r.useRef)(),a=Object(r.useRef)(null),n=Object(r.useRef)(null),s=function(){return new window.google.maps.Map(t.current,{zoom:16,center:{lat:e.lat,lng:e.lon},disableDefaultUI:!0})},c=function(){return new window.google.maps.Marker({position:{lat:e.lat,lng:e.lon},map:a.current})};return Object(r.useEffect)((function(){var e=document.createElement("script");return e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBnC_cdCSBpTJRmDD44MdfSCZ7z8PfREmc","&libraries=places"),window.document.body.appendChild(e),e.addEventListener("load",(function(){a.current=s(),n.current=c()})),function(){e.removeEventListener("load",(function(){a.current=s(),n.current=c()})),e.remove()}}),[]),Object(b.jsx)("div",{ref:t,style:{height:"300px",width:"100%",flexBasis:"100%",marginBottom:"30px"}})},C=function(e){var t=Object(r.useState)([]),a=Object(o.a)(t,2),n=a[0],s=a[1],c=Object(r.useRef)(null);Object(r.useEffect)((function(){(function(){var t=Object(O.a)(p.a.mark((function t(){var a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x()({url:"https://api.opentripmap.com/0.1/en/places/xid/".concat(e.xid),method:"GET",responseType:"JSON",params:{apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 3:a=t.sent,n=[],r={address:a.data.address,img:a.data.preview.source,name:a.data.name,siteUrl:a.data.url,info:a.data.wikipedia_extracts.text,xid:a.data.xid,lat:a.data.point.lat,lon:a.data.point.lon},n.push(r),s(n),g(c.current),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.setHasError(!0);case 15:case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}})()()}),[e.xid]);var i=function(){g(e.forwardedRef.current),setTimeout((function(){e.setIsHidden(!0)}),1e3)},d=function(e){e.preventDefault();var t=I.database().ref(),a=JSON.parse(JSON.stringify.apply(JSON,Object(w.a)(n)));t.push(a)},u=Object(w.a)(n);return Object(b.jsx)("section",{className:"museumDetails",id:"museumDetailsContainer",ref:c,children:u.map((function(e){return Object(b.jsxs)("div",{className:"wrapper museumContainer",children:[Object(b.jsx)(R,{lat:e.lat,lon:e.lon}),Object(b.jsx)("div",{className:"museumImg",children:Object(b.jsx)("img",{src:e.img,alt:e.name})}),Object(b.jsxs)("div",{className:"museumInfo",children:[Object(b.jsx)("h3",{children:e.name}),Object(b.jsxs)("address",{children:[e.address.house_number," ",e.address.road,", ",e.address.city,", ",e.address.state,", ",e.address.postcode," ",e.address.country]}),Object(b.jsxs)("a",{href:e.siteUrl,children:["Visit ",e.name,"'s website"]}),Object(b.jsx)("p",{children:e.info}),Object(b.jsx)("button",{onClick:i,type:"button",children:"Go back to list"}),Object(b.jsx)("button",{onClick:d,type:"button",children:"Save museum"})]})]},e.xid)}))})},D=function(e){return Object(b.jsxs)("div",{className:"errorMessage",children:[Object(b.jsx)("p",{children:"Something went wrong."}),Object(b.jsx)("p",{children:"Please try again."}),Object(b.jsx)("button",{type:"button",onClick:function(){e.setHasError(!1)},children:"Close window"})]})},H=function(e){var t=function(){e.setMuseumDetails([])};return Object(b.jsx)(b.Fragment,{children:e.museumDetails.map((function(e){return Object(b.jsxs)("div",{className:"wrapper museumContainer savedMuseumDetails",children:[Object(b.jsx)("button",{onClick:t,type:"button",children:"X"}),Object(b.jsx)(R,{lat:e.data.lat,lon:e.data.lon}),Object(b.jsx)("div",{className:"museumImg",children:Object(b.jsx)("img",{src:e.data.img,alt:e.data.name})}),Object(b.jsxs)("div",{className:"museumInfo",children:[Object(b.jsx)("h3",{children:e.data.name}),Object(b.jsxs)("address",{children:[e.data.address.house_number," ",e.data.address.road,", ",e.data.address.city,", ",e.data.address.state,", ",e.data.address.postcode," ",e.data.address.country]}),Object(b.jsxs)("a",{href:e.data.siteUrl,children:["Visit ",e.data.name,"'s website"]}),Object(b.jsx)("p",{children:e.data.info})]})]},e.key)}))})},M=Object(r.forwardRef)((function(e,t){var a=Object(r.useState)([]),n=Object(o.a)(a,2),s=n[0],c=n[1],i=Object(r.useState)([]),d=Object(o.a)(i,2),u=d[0],l=d[1];Object(r.useEffect)((function(){var e=!0;return I.database().ref().on("value",(function(t){var a=[],n=t.val();for(var r in n)a.push({key:r,data:n[r]});e&&c(a)})),function(){e=!1}}),[]);var j=Object(w.a)(s),f=Object(w.a)(u);return Object(b.jsxs)("section",{className:"saved",id:"savedSection",ref:e.forwardedRef,children:[Object(b.jsx)("h2",{children:"Saved Museums"}),Object(b.jsx)("ul",{className:"wrapper",children:j.map((function(e){return Object(b.jsxs)("li",{children:[Object(b.jsx)("button",{className:"delete",onClick:function(){return t=e.key,void I.database().ref().child(t).remove();var t},type:"button",children:"X"}),Object(b.jsxs)("button",{type:"button",onClick:function(){return function(e){var t=j.filter((function(t){return t.data.xid===e}));l(t)}(e.data.xid)},children:[Object(b.jsx)("h3",{children:e.data.name}),Object(b.jsxs)("p",{children:[e.data.address.city,", ",e.data.address.country_code.toUpperCase()," "]}),Object(b.jsx)("img",{src:e.data.img,alt:e.data.name})]})]},e.key)}))}),Object(b.jsx)(H,{museumDetails:f,setMuseumDetails:l})]})})),T=function(e){return Object(b.jsx)("nav",{className:"savedNav",children:Object(b.jsx)("button",{type:"button",onClick:function(){e.setSavedIsHidden(!e.savedIsHidden),setTimeout((function(){g(e.forwardedRef.current)}),500)},children:e.savedIsHidden?"Saved Museums":"Close"})})},J=function(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(""),c=Object(o.a)(s,2),i=c[0],d=c[1],u=Object(r.useState)(!0),l=Object(o.a)(u,2),j=l[0],m=l[1],p=Object(r.useState)(!1),O=Object(o.a)(p,2),h=O[0],x=O[1],y=Object(r.useState)(!0),w=Object(o.a)(y,2),g=w[0],S=w[1],E=Object(r.useRef)(null),N=Object(r.useRef)(null);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T,{savedIsHidden:g,setSavedIsHidden:S,forwardedRef:N}),Object(b.jsx)(f,{}),Object(b.jsx)(v,{setCityData:n,setHasError:x}),a.name?Object(b.jsx)(k,{cityData:a,setXid:d,setIsHidden:m,setHasError:x,forwardedRef:E}):null,j?null:Object(b.jsx)(C,{xid:i,setIsHidden:m,setHasError:x,forwardedRef:E}),g?null:Object(b.jsx)(M,{forwardedRef:N}),h?Object(b.jsx)(D,{setHasError:x}):null]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(J,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[54,1,2]]]);
//# sourceMappingURL=main.52f45e86.chunk.js.map