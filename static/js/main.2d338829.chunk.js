(this["webpackJsonpmuseum-finder"]=this["webpackJsonpmuseum-finder"]||[]).push([[0],{26:function(e,t,a){e.exports=a(52)},31:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),l=(a(31),a(1));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=r.a.createElement("path",{d:"m42.933 1.219c-1.551 1.55-19.933 19.619-19.933 19.619s-18.382-18.069-19.933-19.619c-2.742-2.742-3.067 0-3.067 0v41h23 23v-41c0 0-.325-2.742-3.067 0z",fill:"#b0b0b0"}),m=function(e){var t=e.svgRef,a=e.title,n=i(e,["svgRef","title"]);return r.a.createElement("svg",u({enableBackground:"new 0 0 46 42.219",height:16.55,viewBox:"0 0 46 42.219",width:46,ref:t},n),a?r.a.createElement("title",null,a):null,o)},d=r.a.forwardRef((function(e,t){return r.a.createElement(m,u({svgRef:t},e))})),p=(a.p,function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Museum ",r.a.createElement("span",null,r.a.createElement(d,{className:"logo"}),"Finder")))}),f=a(3),b=a.n(f),E=a(5),v=a(6),y=a.n(v),h=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],u=function(){var t=Object(E.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,y()({url:"https://api.opentripmap.com/0.1/en/places/geoname",method:"GET",responseType:"JSON",params:{name:c,apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 4:n=t.sent,r={name:n.data.name,country:n.data.country,lat:n.data.lat,lon:n.data.lon},e.setCityData(r),s(""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0),e.setHasError(!0);case 14:case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("main",null,r.a.createElement("form",{onSubmit:function(e){return u(e)},className:"wrapper"},r.a.createElement("label",{className:"visuallyHidden",htmlFor:"city"},"Enter a city"),r.a.createElement("input",{id:"city",value:c,type:"text",placeholder:"Enter City",onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{className:"visuallyHidden",htmlFor:"submit"},"Search"),r.a.createElement("input",{id:"submit",type:"submit",value:"Search"}),r.a.createElement("p",null,"Enter a city to search for museums.")))},O=function(e){var t=Object(n.useState)({}),a=Object(l.a)(t,2),c=a[0],s=a[1],u=e.cityData,i=u.name,o=u.country,m=u.lat,d=u.lon,p=function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y()({url:"https://api.openweathermap.org/data/2.5/weather",method:"GET",responseType:"JSON",params:{lat:m,lon:d,units:"metric",appid:"c9a747c48bbadd82284c2f57f9cf4656"}});case 3:t=e.sent,a=Math.round(t.data.main.temp),n={temp:a,description:t.data.weather[0].main},s(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[i]),r.a.createElement("section",null,r.a.createElement("div",{className:"cityInfo",id:"cityInfoContainer"},r.a.createElement("p",null,"Museums in"),r.a.createElement("h2",null,i,", ",o),r.a.createElement("div",{className:"weather"},r.a.createElement("p",null,c.temp," \u2103"),r.a.createElement("p",null,c.description))))},g=a(4),j=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},w=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],u=e.cityData,i=u.lon,o=u.lat,m=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y()({url:"https://api.opentripmap.com/0.1/en/places/radius",method:"GET",responseType:"JSON",params:{radius:1e5,lon:i,lat:o,kinds:"museums",rate:"3",format:"json",limit:20,apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 3:a=t.sent,(n=[]).push.apply(n,Object(g.a)(a.data)),s(n),j("cityInfoContainer"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),e.setHasError(!0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){m()}),[o]);var d=Object(g.a)(c);return r.a.createElement("section",{className:"museumsList wrapper"},r.a.createElement("ul",null,d.map((function(t){return r.a.createElement("li",{key:t.xid},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-landmark"})),r.a.createElement("button",{type:"button",onClick:function(){return a=t.xid,e.setXid(a),void e.setIsHidden(!1);var a}},t.name))}))))},k=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{cityData:e.cityData}),r.a.createElement(w,{cityData:e.cityData,setXid:e.setXid,setIsHidden:e.setIsHidden,setHasError:e.setHasError}))},S=a(11),x=a.n(S);a(50);x.a.initializeApp({apiKey:"AIzaSyCgo__XjZygSR0XWEphiMiwPuOjNxefH0Y",authDomain:"museumfinder-3d651.firebaseapp.com",databaseURL:"https://museumfinder-3d651.firebaseio.com",projectId:"museumfinder-3d651",storageBucket:"museumfinder-3d651.appspot.com",messagingSenderId:"609226698076",appId:"1:609226698076:web:a6cfa6c2f5a9d2c04ba599"});var N=x.a,I=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],s=a[1],u=function(){var t=Object(E.a)(b.a.mark((function t(){var a,n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y()({url:"https://api.opentripmap.com/0.1/en/places/xid/".concat(e.xid),method:"GET",responseType:"JSON",params:{apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}});case 3:a=t.sent,n=[],r={address:a.data.address,img:a.data.preview.source,name:a.data.name,siteUrl:a.data.url,info:a.data.wikipedia_extracts.text,xid:a.data.xid},n.push(r),s(n),j("museumDetailsContainer"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),e.setHasError(!0);case 15:case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),i=function(){j("cityInfoContainer"),setTimeout((function(){e.setIsHidden(!0)}),1e3)},o=function(e){e.preventDefault();var t=N.database().ref(),a=JSON.parse(JSON.stringify.apply(JSON,Object(g.a)(c)));t.push(a)};Object(n.useEffect)((function(){u()}),[e.xid]);var m=Object(g.a)(c);return r.a.createElement("section",{className:"museumDetails",id:"museumDetailsContainer"},m.map((function(e){return r.a.createElement("div",{className:"wrapper museumContainer",key:e.xid},r.a.createElement("div",{className:"museumImg"},r.a.createElement("img",{src:e.img,alt:e.name})),r.a.createElement("div",{className:"museumInfo"},r.a.createElement("h3",null,e.name),r.a.createElement("address",null,e.address.house_number," ",e.address.road,", ",e.address.city,", ",e.address.state,", ",e.address.postcode," ",e.address.country),r.a.createElement("a",{href:e.siteUrl},"Visit ",e.name,"'s website"),r.a.createElement("p",null,e.info),r.a.createElement("button",{onClick:i,type:"button"},"Go back to list"),r.a.createElement("button",{onClick:o,type:"button"},"Save museum")))})))},H=function(e){return r.a.createElement("div",{className:"errorMessage"},r.a.createElement("p",null,"Something went wrong."),r.a.createElement("p",null,"Please try again."),r.a.createElement("button",{type:"button",onClick:function(){e.setHasError(!1)}},"Close window"))},C=function(e){var t=function(){e.setMuseumDetails([])};return r.a.createElement(r.a.Fragment,null,e.museumDetails.map((function(e){return r.a.createElement("div",{className:"wrapper museumContainer savedMuseumDetails",key:e.key},r.a.createElement("button",{onClick:t,type:"button"},"X"),r.a.createElement("div",{className:"museumImg"},r.a.createElement("img",{src:e.data.img,alt:e.data.name})),r.a.createElement("div",{className:"museumInfo"},r.a.createElement("h3",null,e.data.name),r.a.createElement("address",null,e.data.address.house_number," ",e.data.address.road,", ",e.data.address.city,", ",e.data.address.state,", ",e.data.address.postcode," ",e.data.address.country),r.a.createElement("a",{href:e.data.siteUrl},"Visit ",e.data.name,"'s website"),r.a.createElement("p",null,e.data.info)))})))},D=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),u=Object(l.a)(s,2),i=u[0],o=u[1];Object(n.useEffect)((function(){N.database().ref().on("value",(function(e){var t=[],a=e.val();for(var n in a)t.push({key:n,data:a[n]});c(t)}))}),[]);var m=Object(g.a)(a),d=Object(g.a)(i);return r.a.createElement("section",{className:"saved",id:"savedSection"},r.a.createElement("h2",null,"Saved Museums"),r.a.createElement("ul",{className:"wrapper"},m.map((function(e){return r.a.createElement("li",{key:e.key},r.a.createElement("button",{className:"delete",onClick:function(){return t=e.key,void N.database().ref().child(t).remove();var t},type:"button"},"X"),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var t=m.filter((function(t){return t.data.xid===e}));o(t)}(e.data.xid)}},r.a.createElement("h3",null,e.data.name),r.a.createElement("p",null,e.data.address.city,", ",e.data.address.country_code.toUpperCase()," "),r.a.createElement("img",{src:e.data.img,alt:e.data.name})))}))),r.a.createElement(C,{museumDetails:d,setMuseumDetails:o}))},M=function(e){return r.a.createElement("nav",{className:"savedNav"},r.a.createElement("a",{href:"#savedSection",onClick:function(){e.setSavedIsHidden(!e.savedIsHidden)}},e.savedIsHidden?"Saved Museums":"Close"))},J=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),i=u[0],o=u[1],m=Object(n.useState)(!0),d=Object(l.a)(m,2),f=d[0],b=d[1],E=Object(n.useState)(!1),v=Object(l.a)(E,2),y=v[0],O=v[1],g=Object(n.useState)(!0),j=Object(l.a)(g,2),w=j[0],S=j[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{savedIsHidden:w,setSavedIsHidden:S}),r.a.createElement(p,null),r.a.createElement(h,{setCityData:c,setHasError:O}),a.name?r.a.createElement(k,{cityData:a,setXid:o,setIsHidden:b,setHasError:O}):null,f?null:r.a.createElement(I,{xid:i,setIsHidden:b,setHasError:O}),w?null:r.a.createElement(D,null),y?r.a.createElement(H,{setHasError:O}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.2d338829.chunk.js.map