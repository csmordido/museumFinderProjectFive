(this["webpackJsonpmuseum-finder"]=this["webpackJsonpmuseum-finder"]||[]).push([[0],{18:function(e,t,a){e.exports=a(41)},23:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),s=a.n(i),l=(a(23),a(3)),u=a(4),o=a(1),c=a(6),m=a(5),d=a(7),h=a.n(d),p=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.onTextInputChange(e.target.value)},n.handleSubmit=function(e){n.props.onFormSubmit(e)},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit,className:"wrapper"},r.a.createElement("label",{className:"visuallyHidden",htmlFor:"city"},"Enter a city"),r.a.createElement("input",{id:"city",value:this.props.value,type:"text",placeholder:"Enter City",onChange:this.handleChange}),r.a.createElement("label",{className:"visuallyHidden",htmlFor:"submit"},"Search"),r.a.createElement("input",{id:"submit",type:"submit",value:"Search"}),r.a.createElement("p",null,"Enter a city to search for museums."))}}]),a}(n.Component),f=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},b=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(e){var t=e.target.value;h()({url:"https://api.opentripmap.com/0.1/en/places/xid/".concat(t),method:"GET",responseType:"JSON",params:{apikey:"5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71"}}).then((function(e){var t=[];t.push(e.data),n.props.onDataUpdate(t),f("detailsContainer")}))},n.handleClick=n.handleClick.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("li",null,r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-landmark"})),r.a.createElement("button",{type:"button",value:this.props.museumXid,onClick:this.handleClick},this.props.museumName))}}]),a}(n.Component),E=function(){f("listContainer"),setTimeout((function(){document.getElementById("detailsContainer").style.display="none"}),1e3)},v=function(e){var t=e.imgDetail,a=e.nameDetail,n=e.addressDetail,i=e.urlDetail,s=e.infoDetail,l=n.house_number,u=n.road,o=n.city,c=n.state,m=n.postcode,d=n.country;return r.a.createElement("section",{className:"museumDetails",id:"detailsContainer"},r.a.createElement("div",{className:"wrapper museumContainer"},r.a.createElement("div",{className:"museumImg"},r.a.createElement("img",{src:t,alt:a})),r.a.createElement("div",{className:"museumInfo"},r.a.createElement("h2",null,a),r.a.createElement("address",null,l," ",u,", ",o,", ",c,", ",m," ",d),r.a.createElement("a",{href:i},"Visit ",a,"'s website"),r.a.createElement("p",null,s),r.a.createElement("button",{onClick:E,type:"button"},"Go back to list"))))},y=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"cityInfo"},r.a.createElement("p",null,"Museums in"),r.a.createElement("h2",null,this.props.city,", ",this.props.country))}}]),a}(n.Component);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var O=r.a.createElement("path",{d:"m42.933 1.219c-1.551 1.55-19.933 19.619-19.933 19.619s-18.382-18.069-19.933-19.619c-2.742-2.742-3.067 0-3.067 0v41h23 23v-41c0 0-.325-2.742-3.067 0z",fill:"#b0b0b0"}),k=function(e){var t=e.svgRef,a=e.title,n=C(e,["svgRef","title"]);return r.a.createElement("svg",g({enableBackground:"new 0 0 46 42.219",height:16.55,viewBox:"0 0 46 42.219",width:46,ref:t},n),a?r.a.createElement("title",null,a):null,O)},w=r.a.forwardRef((function(e,t){return r.a.createElement(k,g({svgRef:t},e))})),j=(a.p,function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClick=function(){document.querySelector(".errorMessage").style.display="none",n.props.updateErrorState(!1)},n.handleClick=n.handleClick.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"errorMessage"},r.a.createElement("p",null,"Something went wrong."),r.a.createElement("p",null,"Please try again."),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Close window"))}}]),a}(n.Component)),D=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleSubmit=function(t){t.preventDefault();var a="5ae2e3f221c38a28845f05b6c25ce5d3be16ef238b3cedc588767b71";h()({url:"https://api.opentripmap.com/0.1/en/places/geoname",method:"GET",responseType:"JSON",params:{name:e.state.userInput,apikey:a}}).then((function(t){var n=t.data.lon,r=t.data.lat,i=[];i.push(t.data.name,t.data.country),e.setState({cityInfo:i}),e.updateMuseumsData(n,r,a)})).catch((function(t){t&&e.setState({hasError:!0})})),e.setState({userInput:""})},e.updateMuseumsData=function(t,a,n){h()({url:"https://api.opentripmap.com/0.1/en/places/radius",method:"GET",responseType:"JSON",params:{radius:1e5,lon:t,lat:a,kinds:"museums",rate:"3",format:"json",limit:10,apikey:n}}).then((function(t){var a=[];t.data.forEach((function(e){a.push(e)})),e.setState({museumsData:a}),e.state.isDesktop?e.setContainerHeight("100vh"):e.setContainerHeight("initial"),e.state.museumsData&&f("listContainer")})).catch((function(t){t&&e.setState({hasError:!0})}))},e.setContainerHeight=function(e){document.getElementById("listContainer").style.height=e},e.handleWindowResize=function(){e.setState({isDesktop:window.innerWidth>=940}),e.state.isDesktop&&!e.state.hasError?e.setContainerHeight("100vh"):e.setContainerHeight("initial")},e.updateHasError=function(t){e.setState({hasError:t})},e.state={userInput:"",cityInfo:[],museumsData:[],museumDetails:[],isDesktop:!1,hasError:!1},e.handleChange=e.handleChange.bind(Object(o.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(o.a)(e)),e.updateMuseumDetails=e.updateMuseumDetails.bind(Object(o.a)(e)),e.updateHasError=e.updateHasError.bind(Object(o.a)(e)),e}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState({userInput:e})}},{key:"updateMuseumDetails",value:function(e){this.setState({museumDetails:e})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize);var e=window.innerWidth;this.setState({isDesktop:e>=940})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"Museum ",r.a.createElement("span",null,r.a.createElement(w,{className:"logo"}),"Finder"))),r.a.createElement("main",null,r.a.createElement(p,{onTextInputChange:this.handleChange,value:this.state.userInput,onFormSubmit:this.handleSubmit})),r.a.createElement("section",{className:"museumsList wrapper",id:"listContainer"},this.state.museumsData.length>0?r.a.createElement(y,{city:this.state.cityInfo[0],country:this.state.cityInfo[1]}):null,r.a.createElement("ul",null,this.state.museumsData.map((function(t){return r.a.createElement(b,{key:t.xid,museumName:t.name,museumXid:t.xid,onDataUpdate:e.updateMuseumDetails})})))),this.state.museumDetails.map((function(e){return r.a.createElement(v,{key:e.xid,imgDetail:e.preview.source,nameDetail:e.name,addressDetail:e.address,urlDetail:e.url,infoDetail:e.wikipedia_extracts.text})})),this.state.hasError?r.a.createElement(j,{updateErrorState:this.updateHasError}):null)}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.5772cf1f.chunk.js.map